function Calendarize(){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],t=["Su","Mo","Tu","We","Th","Fr","Sa"];return{getDaysInMonth:function(e,t){for(var a=new Date(t,e,1),n=[];a.getMonth()===e;)n.push(new Date(a)),a.setDate(a.getDate()+1);return n},getMonthsInYear:function(e){for(var t=new Date(e,0,1),a=[],n=0;n<12;)a.push(new Date(t)),t.setMonth(t.getMonth()+1),n++;return a},getMonthsInRange:function(e,t){for(var a=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(t.getFullYear(),t.getMonth(),1),r=[];a<=n;)r.push(new Date(a)),a.setMonth(a.getMonth()+1),0;return r},buildYearCalendar:function(e,t){var a=this,n=a.getMonthsInYear(t),r={showMonth:!0,showDaysOfWeek:!0,showYear:!0,clickHandler:function(e){e.target.getAttribute("data-date")}};n.forEach(function(n,s){var d=a.buildMonth(s,t,r);e.appendChild(d)})},buildMonthsInRange:function(e,t,a,n){var r=this,s=new Date((new Date).setDate(a.getDate()+n)),d=r.getMonthsInRange(a,s);(t=t||{}).limitDate=s||!1,t.reverse&&(d=d.reverse()),d.forEach(function(a,n){var s=a.getMonth(),d=a.getFullYear(),o=r.buildMonth(s,d,t);e.appendChild(o)})},buildMonth:function(a,n,r){var s=new Date(n,a,1),d=s.getMonth(),o=new Date(s.setMonth(d-1)),i=new Date(s.setMonth(d+1)),l=this.getDaysInMonth(a,n),u=this.getDaysInMonth(o.getMonth(),o.getFullYear()),h=(this.getDaysInMonth(i.getMonth(),i.getFullYear()),document.createElement("div")),c=document.createElement("h4"),D=l[0].getDay(),g=l.length+D;h.classList.add("month"),r.showMonth&&(c.innerText=e[a]+(r.showYear?" "+n:""),h.appendChild(c)),r.showDaysOfWeek&&t.forEach(function(e,a){var n=document.createElement("div");n.classList.add("dow"),n.innerText=t[a],h.appendChild(n)});for(var f=0;f<D;f++){(y=document.createElement("div")).classList.add("dummy-day"),y.innerText=u.length-(D-(f+1)),h.appendChild(y)}l.forEach(function(e,t){var a=new Date((new Date).setHours(0,0,0,0)),n=document.createElement("div");n.classList.add("day"),n.setAttribute("data-date",e),n.innerText=t+1;var s=new Date(e).getDay(),d=Date.parse(e),o=Date.parse(a);if(d===o&&n.classList.add("today"),d>o&&n.classList.add("future"),d<o&&n.classList.add("past"),0!==s&&6!==s||n.classList.add("weekend"),r.onlyCurrent&&e<a&&n.classList.add("dummy-day"),r.limitDate&&e>r.limitDate&&n.classList.add("dummy-day"),r.filterDayOfWeek){for(var i=!1,l=0;l<r.filterDayOfWeek.length;l++)e.getDay()==r.filterDayOfWeek[l]&&(i=!0);i||n.classList.add("dummy-day")}if(r.clickHandler&&!n.classList.contains("dummy-day")){function u(e){(e=e||window.event).preventDefault(),e.stopPropagation();var t=!1;t||(t=!0,setTimeout(function(){t=!1},300),r.clickHandler(e))}n.addEventListener("touchstart",u),n.addEventListener("mousedown",u)}h.appendChild(n)});for(var m=0;m<(g%7==0?0:g<35?35-g:42-g);m++){var y;(y=document.createElement("div")).classList.add("dummy-day"),y.innerText=m+1,h.appendChild(y)}return h}}}
